(this["webpackJsonpfront-page-of-the-front-page"]=this["webpackJsonpfront-page-of-the-front-page"]||[]).push([[0],{56:function(t,n,e){t.exports=e(88)},61:function(t,n,e){},88:function(t,n,e){"use strict";e.r(n);var r=e(1),o=e.n(r),a=e(49),i=e.n(a),c=e(6),u=e(4),l=e(3),s=e(14),d=e(12),p=(e(61),e(2)),f=e(10),m=e.n(f),b=e(16),h=e(13),g=e.n(h);e(63),e(66);g.a.initializeApp({apiKey:"AIzaSyBa7AHjUtlq9nXoHJl6VYyA6B__Z0iiawU",authDomain:"front-page-of-the-front-page.firebaseapp.com",databaseURL:"https://front-page-of-the-front-page.firebaseio.com",projectId:"front-page-of-the-front-page",storageBucket:"front-page-of-the-front-page.appspot.com",messagingSenderId:"739647364485",appId:"1:739647364485:web:f9ae2fb071cb9faafd38ec",measurementId:"G-JBZ3EG1M29"});var x=g.a,v=function(){var t=Object(b.a)(m.a.mark((function t(n,e,r,o){var a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(){var t=Object(b.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.auth().createUserWithEmailAndPassword(e,r).catch((function(t){return console.log(t.code,t.message)}));case 3:return t.next=5,g.a.auth().signInWithEmailAndPassword(e,r).catch((function(t){return console.log(t.code,t.message)}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:return t.abrupt("return",g.a.auth().currentUser);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),t.next=3,a();case 3:return i=t.sent,t.next=6,i.updateProfile({displayName:n}).catch((function(t){return console.log(t)}));case 6:return t.next=8,g.a.firestore().collection("users").doc(window.user.uid).set({username:n,uid:window.user.uid,email:e,posts:[],postVotes:{},commentVotes:{}}).then((function(){o({email:window.user.email,username:n,uid:window.user.uid,isSignedIn:!0,isAnonymous:!1,posts:[],postVotes:{},commentVotes:{}})})).catch((function(t){return console.log(t)}));case 8:g.a.firestore().collection("usernames").doc(n).set({username:n}).catch((function(t){return console.log(t)}));case 9:case"end":return t.stop()}}),t)})));return function(n,e,r,o){return t.apply(this,arguments)}}(),j=function(){var t=Object(b.a)(m.a.mark((function t(n,e,r,o,a,i){var c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.auth().signInWithEmailAndPassword(n,e).then((function(){return!0})).catch((function(t){return console.log(t.code,t.message),!1}));case 2:if(!t.sent){t.next=10;break}return t.next=6,g.a.firestore().collection("users").doc(window.user.uid).get().then((function(t){c=t.data()}));case 6:return t.next=8,r({email:n,uid:c.uid,username:c.username,isSignedIn:!0,isAnonymous:!1,postVotes:c.postVotes,commentVotes:c.commentVotes,posts:c.posts});case 8:t.next=12;break;case 10:i(!0),a("login");case 12:case"end":return t.stop()}}),t)})));return function(n,e,r,o,a,i){return t.apply(this,arguments)}}();function O(){var t=Object(l.a)(['\n\nbody, h1, h2, h3, h4, h5, h6, textarea {\n    font-family: "IBM Plex Sans", sans-serif;\n\n}\n\nbutton {\n    width: auto;\n\theight: auto;\n\tborder-radius: 4px;\n\tpadding: 4px 22px 4px 22px;\n\tfont-size: 12px;\n\ttext-align: center;\n\ttext-transform: uppercase;\n\tmargin: 0 4px;\n\tcursor: pointer;\n\n\ninput:not([type]), input[type="text"] {\n\theight: 36px;\n\twidth: 100%;\n\tborder-radius: 4px;\n\tfont-size: 16px;\n\ttext-indent: 10px;\n\toutline: none;\n\tborder: none;\n}\n\n}\n\n']);return O=function(){return t},t}function E(){var t=Object(l.a)(["\n\tbackground: white;\n\tborder: 1px solid lightgray;\n\tborder-radius: 4px;\n"]);return E=function(){return t},t}var w=function(t){return Object(p.c)(E())},y=Object(p.b)(O()),k=e(17),C=e(28),S=e(18),P=e(19);function z(){var t=Object(l.a)(["\n\tdisplay: inline;\n\t&&:hover {\n\t\t"," {\n\t\t\tcolor: ",";\n\t\t}\n\t\t"," {\n\t\t\tcolor: ",";\n\t\t}\n\t}\n"]);return z=function(){return t},t}function T(){var t=Object(l.a)(["\n\tdisplay: inline;\n\t&&:hover {\n\t\t"," {\n\t\t\tcolor: ",";\n\t\t}\n\t\t"," {\n\t\t\tcolor: ",";\n\t\t}\n\t}\n"]);return T=function(){return t},t}function I(){var t=Object(l.a)(["\n\tdisplay: inline;\n\t&&:hover {\n\t\t"," {\n\t\t\tcolor: ",";\n\t\t}\n\t\t"," {\n\t\t\tcolor: ",";\n\t\t}\n\t}\n"]);return I=function(){return t},t}function V(){var t=Object(l.a)([""]);return V=function(){return t},t}function M(){var t=Object(l.a)([""]);return M=function(){return t},t}function B(){var t=Object(l.a)([""]);return B=function(){return t},t}function L(){var t=Object(l.a)(["\n\tmargin-right: 2px;\n\tpadding-top: 2px;\n\tposition: relative;\n\ttop: 2px;\n\tright: 0;\n\tcursor: pointer;\n\tcolor: ",";\n"]);return L=function(){return t},t}function A(){var t=Object(l.a)([""]);return A=function(){return t},t}function D(){var t=Object(l.a)([""]);return D=function(){return t},t}function U(){var t=Object(l.a)([""]);return U=function(){return t},t}function _(){var t=Object(l.a)(["\n\tpadding: 16px;\n"]);return _=function(){return t},t}function G(){var t=Object(l.a)(["\n\tpadding-right: 12px;\n\tcursor: pointer;\n\tcolor: ",";\n"]);return G=function(){return t},t}function F(){var t=Object(l.a)(["\n\tdisplay: none;\n"]);return F=function(){return t},t}function W(){var t=Object(l.a)(["\n\theight: 54px;\n\t","\n\tmargin-bottom: 18px;\n"]);return W=function(){return t},t}var q=p.d.div(W(),w),R=p.d.input(F()),N=p.d.label(G(),(function(t){return t.sortby===t.value?t.theme.colors.blue:t.theme.colors.grey})),J=p.d.div(_()),H=Object(p.d)(N)(U()),X=Object(p.d)(N)(D()),Y=Object(p.d)(N)(A()),Z=p.d.svg(L(),(function(t){return t.sortby===t.value?t.theme.colors.blue:t.theme.colors.grey})),K=Object(p.d)(Z)(B()),$=Object(p.d)(Z)(M()),Q=Object(p.d)(Z)(V()),tt=p.d.div(I(),$,(function(t){return t.theme.colors.blue}),H,(function(t){return t.theme.colors.blue})),nt=p.d.div(T(),Q,(function(t){return t.theme.colors.blue}),X,(function(t){return t.theme.colors.blue})),et=p.d.div(z(),K,(function(t){return t.theme.colors.blue}),Y,(function(t){return t.theme.colors.blue}));function rt(t){var n=t.sortPosts,e=t.sortBy;return o.a.createElement(q,null,o.a.createElement(J,{onChange:function(t){return n(t.target.value)}},o.a.createElement(et,{value:"VOTE_ASC",sortby:e},o.a.createElement(K,{as:S.a,sortby:e,value:"VOTE_ASC"}),o.a.createElement(Y,{sortby:e,value:"VOTE_ASC"},"Top",o.a.createElement(R,{type:"radio",name:"sort",value:"VOTE_ASC"}))),o.a.createElement(tt,{value:"TIME_ASC",sortby:e},o.a.createElement($,{as:C.b,sortby:e,value:"TIME_ASC"}),o.a.createElement(H,{sortby:e,value:"TIME_ASC"},"New",o.a.createElement(R,{type:"radio",name:"sort",value:"TIME_ASC"}))),o.a.createElement(nt,{value:"TIME_DESC",sortby:e},o.a.createElement(Q,{as:P.b,sortby:e,value:"TIME_DESC"}),o.a.createElement(X,{sortby:e,value:"TIME_DESC"},"Old",o.a.createElement(R,{type:"radio",name:"sort",value:"TIME_DESC"})))))}function ot(){var t=Object(l.a)(["\n\theight: ",";\n"]);return ot=function(){return t},t}function at(){var t=Object(l.a)(["\n\ttransform: scaleX(-1);\n"]);return at=function(){return t},t}function it(){var t=Object(l.a)(["\n\tdisplay: inline;\n\tpadding: 12px 12px 0 12px;\n\t&& > p {\n\t\tdisplay: inline;\n\t}\n"]);return it=function(){return t},t}function ct(){var t=Object(l.a)(["\n\tpadding: 0 12px 12px 12px;\n\tcolor: black;\n\tfont-size: 13px;\n\tline-height: 1.4em;\n\n\t&& > a {\n\t\tcolor: ",";\n\t}\n"]);return ct=function(){return t},t}function ut(){var t=Object(l.a)(["\n\tbackground: ",";\n\tborder-top-right-radius: 4px;\n\tborder-top-left-radius: 4px;\n\n\t&& > p {\n\t\tpadding: 12px;\n\t}\n"]);return ut=function(){return t},t}function lt(){var t=Object(l.a)(["\n\tbackground: white;\n\t",";\n"]);return lt=function(){return t},t}var st=p.d.div(lt(),w),dt=p.d.div(ut(),(function(t){return t.theme.colorlightGray})),pt=p.d.p(ct(),(function(t){return t.theme.colorblue})),ft=p.d.div(it()),mt=p.d.svg(at()),bt=p.d.div(ot(),(function(t){return t.height+"px"}));function ht(){return o.a.createElement(st,null,o.a.createElement(dt,null,o.a.createElement("p",null,"About Project")),o.a.createElement(bt,{height:12}),o.a.createElement(pt,null,"Welcome to the front page of the front page! This was built by me, Austin Ftacnik, for my final project of"," ",o.a.createElement("a",{href:"https://www.theodinproject.com/courses/javascript/lessons/final-project-116ff273-1e55-4055-bd7f-146c17d0ec9c",target:"_blank",rel:"noopener noreferrer"},"The Odin Project")," ","JavaScript course. This is a simplified clone of a popular website and was built for learning purposes, not to replace said site. If you have any questions or comments, feel free to contact via"," ",o.a.createElement("a",{href:"https://github.com/aplyd",target:"_blank",rel:"noopener noreferrer"},"Github")," ","or"," ",o.a.createElement("a",{href:"https://twitter.com/austinftacnik",target:"_blank",rel:"noopener noreferrer"},"Twitter"),"."),o.a.createElement(bt,{height:12}),o.a.createElement(ft,null,o.a.createElement(mt,{as:C.a})," ",o.a.createElement("p",null,"Created April 15th, 2020")),o.a.createElement(bt,{height:24}))}function gt(){return o.a.createElement(st,null,o.a.createElement(dt,null,o.a.createElement("p",null,"Development Tools")),o.a.createElement(bt,{height:12}),o.a.createElement(pt,null,"\xb7 React",o.a.createElement("br",null),"\xb7 Styled-components",o.a.createElement("br",null),"\xb7 Firebase Firestore",o.a.createElement("br",null)))}function xt(){var t=Object(l.a)(["\n\theight: 12px;\n\twidth: 100%;\n"]);return xt=function(){return t},t}function vt(){var t=Object(l.a)(["\n\tgrid-column: 2;\n\tgrid-row: 1 / 3;\n"]);return vt=function(){return t},t}var jt=p.d.div(vt()),Ot=p.d.div(xt());function Et(){return o.a.createElement(jt,null,o.a.createElement(ht,null),o.a.createElement(Ot,null),o.a.createElement(gt,null))}var wt=e(7);function yt(){var t=Object(l.a)(["\n\tcursor: pointer;\n\tpadding-bottom: 12px;\n\t&& > a {\n\t\tcolor: ",";\n\t\tfont-size: 12px;\n\t}\n\t&& > a:visited {\n\t\tcolor: ",";\n\t}\n\t&& > svg {\n\t\tfont-size: 10px;\n\t\tcolor: ",";\n\t}\n"]);return yt=function(){return t},t}function kt(){var t=Object(l.a)(["\n\twidth: 100%;\n\tposition: relative;\n\tpadding-bottom: 56.25%;\n\tpadding-top: 12px 0 16px 0;\n"]);return kt=function(){return t},t}function Ct(){var t=Object(l.a)(["\n\toverflow: hidden;\n\twidth: 100%;\n\tmargin: 0 auto;\n\tposition: absolute;\n\theight: 100%;\n\tborder: none;\n"]);return Ct=function(){return t},t}function St(){var t=Object(l.a)(["\n\tfont-size: 20px;\n"]);return St=function(){return t},t}function Pt(){var t=Object(l.a)(["\n\tmax-height: 512px;\n\tmax-width: 640px;\n\tpadding-right: 40px;\n\t@media screen and (max-width: 620px) {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tobject-fit: contain;\n\t}\n"]);return Pt=function(){return t},t}function zt(){var t=Object(l.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding-top: 16px;\n\t@media screen and (max-width: 640px) {\n\t\tpadding-top: 32px;\n\t}\n"]);return zt=function(){return t},t}function Tt(){var t=Object(l.a)([""]);return Tt=function(){return t},t}var It=p.d.div(Tt()),Vt=p.d.div(zt()),Mt=p.d.img(Pt()),Bt=p.d.h2(St()),Lt=p.d.iframe(Ct()),At=p.d.div(kt()),Dt=p.d.div(yt(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.blue})),Ut=function(t){var n=t.title,e=t.media,r=e&&e.url.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").split("/")[0];return o.a.createElement(It,null,o.a.createElement(Bt,null,n),"image"===e.mediaType&&o.a.createElement(Vt,null,o.a.createElement(Mt,{src:e.url,alt:n})),"video"===e.mediaType&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Dt,null,o.a.createElement("a",{href:e.url},r," "),o.a.createElement(wt.b,null)),o.a.createElement(At,null,o.a.createElement(Lt,{src:e.url,width:"100%","padding-top":"100%",scrolling:"no",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullScreen:!0}))))},_t=function(t){Object(r.useEffect)((function(){var n=function(){t(window.innerWidth)};return t(window.innerWidth),window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[t])};function Gt(){var t=Object(l.a)(["\n\tcursor: pointer;\n\t&& > svg {\n\t\tfont-size: 10px;\n\t\tcolor: ",";\n\t}\n\t&& > p {\n\t\tfont-size: 12px;\n\t\tcolor: ",";\n\t\tdisplay: inline;\n\t}\n"]);return Gt=function(){return t},t}function Ft(){var t=Object(l.a)(["\n\tfont-size: 12px;\n\tjustify-self: flex-end;\n\tpadding-top: 4px;\n\tcolor: ",";\n\t&&:visited {\n\t\tcolor: ",";\n\t}\n"]);return Ft=function(){return t},t}function Wt(){var t=Object(l.a)(["\n\tbackground-color: ",";\n\tpadding: 5px;\n\tcolor: white;\n\tfont-size: 9px;\n\tborder-top-left-radius: 4px;\n\tposition: absolute;\n\tbottom: 0;\n\tright: 0;\n"]);return Wt=function(){return t},t}function qt(){var t=Object(l.a)(["\n\tfont-size: 24px;\n"]);return qt=function(){return t},t}function Rt(){var t=Object(l.a)(["\n\tfont-size: 20px;\n\tmargin-right: 162px;\n\t@media only screen and (max-width: 475px) {\n\t\tmargin-right: 8px;\n\t}\n"]);return Rt=function(){return t},t}function Nt(){var t=Object(l.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tcursor: pointer;\n"]);return Nt=function(){return t},t}function Jt(){var t=Object(l.a)(["\n\tposition: absolute;\n\tright: 8px;\n\ttop: 16px;\n\twidth: 142px;\n\theight: 98px;\n\tborder-radius: 4px;\n\tcolor: ",";\n\tborder: solid 0.5px ",";\n\tbackground-image: ",";\n\tbackground-size: contain;\n\tbackground-position: center;\n\tcursor: pointer;\n"]);return Jt=function(){return t},t}function Ht(){var t=Object(l.a)(["\n\tpadding: 4px 0px 24px 8px;\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return Ht=function(){return t},t}var Xt=p.d.div(Ht()),Yt=p.d.div(Jt(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.blue}),(function(t){return"url("+t.img+")"})),Zt=Object(p.d)(Yt)(Nt()),Kt=p.d.h2(Rt()),$t=p.d.svg(qt()),Qt=p.d.svg(Wt(),(function(t){return t.theme.colors.blue})),tn=p.d.a(Ft(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.blue})),nn=p.d.div(Gt(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.blue}));function en(t){var n=t.title,e=t.url,a=t.preview,i=Object(r.useState)(null),c=Object(u.a)(i,2),l=c[0],s=c[1],d=Object(r.useState)(0),p=Object(u.a)(d,2),f=p[0],m=p[1];_t(m);var b=e.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").split("/")[0];Object(r.useEffect)((function(){null===a&&void 0===a||s(a)}),[a]);return o.a.createElement(Xt,null,o.a.createElement(Kt,null,n),function(){if(f>475)return a?o.a.createElement(Yt,{img:l,onClick:function(t){t.stopPropagation(),window.open(e,"_blank")}},o.a.createElement(Qt,{as:wt.b})):o.a.createElement(Zt,{onClick:function(t){t.stopPropagation(),window.open(e,"_blank")}},o.a.createElement(Qt,{as:wt.b}),o.a.createElement($t,{as:P.a})," ")}(),o.a.createElement(nn,null,o.a.createElement(tn,{href:e,target:"_blank",onClick:function(t){return t.stopPropagation()}},b),o.a.createElement("p",null,"/... "),o.a.createElement(wt.b,null)))}var rn=e(20),on=e(89),an={TIME_ASC:{column:"timestamp",direction:"asc",column2:"vote",direction2:"asc"},TIME_DESC:{column:"timestamp",direction:"desc",column2:"vote",direction2:"asc"},VOTE_ASC:{column:"vote",direction:"asc",column2:"timestamp",direction2:"asc"}},cn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.commentInput,e=void 0===n?"":n,r=t.timestamp,o=void 0===r?Date.now():r,a=t.username,i=void 0===a?"":a,c=t.points,u=void 0===c?1:c,l=t.replies,s=void 0===l?[]:l,d=t.id,p=void 0===d?Object(on.a)():d,f=t.depth,m=void 0===f?0:f,b=t.deleted,h=void 0!==b&&b;return{commentInput:e,timestamp:o,points:u,replies:s,username:i,id:p,depth:m,deleted:h}};function un(){var t=Object(l.a)(["\n\tposition: relative;\n\ttop: 2.5px;\n\tleft: 0px;\n"]);return un=function(){return t},t}function ln(){var t=Object(l.a)(["\n\tcursor: no-drop;\n\t&&:hover {\n\t\tcursor: no-drop;\n\t}\n"]);return ln=function(){return t},t}function sn(){var t=Object(l.a)(["\n\tvertical-align: middle;\n"]);return sn=function(){return t},t}function dn(){var t=Object(l.a)(["\n\tgrid-column: 2;\n\tgrid-row: 1;\n\tcolor: ",";\n\tfont-size: 10px;\n\ttext-transform: uppercase;\n\tpadding: 6px 0 6px 8px;\n"]);return dn=function(){return t},t}function pn(){var t=Object(l.a)(["\n\tborder-radius: 4px;\n\tcolor: ",";\n\tbackground-color: ",";\n\t&&:hover {\n\t\tcolor: ",";\n\t\tbackground-color: ",";\n\t\tcursor: pointer;\n\t}\n"]);return pn=function(){return t},t}function fn(){var t=Object(l.a)(["\n\ttext-transform: capitalize;\n\tbackground: white;\n\tcolor: gray;\n\tfont-size: 12px;\n\tborder-radius: 4px;\n\toutline: none;\n\tborder: none;\n\tpadding: 0 4px;\n\tmargin-right: 8px;\n\t&&:hover {\n\t\tcursor: pointer;\n\t\tbackground: lightgray;\n\t}\n"]);return fn=function(){return t},t}function mn(){var t=Object(l.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding-left: 8px;\n\tborder: none;\n\tgrid-column: 2;\n\tgrid-row: 2;\n"]);return mn=function(){return t},t}function bn(){var t=Object(l.a)(["\n\tpadding: 4px 8px 20px 8px;\n\tfont-size: 20px;\n\tcolor: black;\n\tword-break: break-all;\n"]);return bn=function(){return t},t}function hn(){var t=Object(l.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 8px 8px 4px 8px;\n\tgrid-column: 3;\n\t&& > p {\n\t\tpadding-right: 8px;\n\t\tcolor: gray;\n\t\tcursor: default;\n\t\tfont-size: 12px;\n\t}\n"]);return hn=function(){return t},t}function gn(){var t=Object(l.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tgrid-column: 2;\n\tgrid-row: 1;\n\tposition: relative;\n"]);return gn=function(){return t},t}var xn=p.d.div(gn()),vn=p.d.div(hn()),jn=p.d.h2(bn()),On=p.d.div(mn()),En=p.d.button(fn()),wn=(p.d.svg(pn(),(function(t){if(t.direction===t.uservote)return"up"===t.direction?t.theme.colors.red:t.theme.colors.blue}),(function(t){return t.direction===t.uservote?t.theme.colors.lightGray:null}),(function(t){return"up"===t.direction?t.theme.colors.red:t.theme.colors.blue}),(function(t){return t.theme.colors.lightGray})),p.d.p(dn(),(function(t){return t.theme.colors.grey}))),yn=Object(p.d)(En)(sn()),kn=Object(p.d)(En)(ln()),Cn=p.d.svg(un()),Sn=function(t){var n=t.pinned,e=t.username,r=t.timestamp,a=t.post,i=a?function(t){var n=0;return function t(e){for(var r=0;r<e.replies.length;r++)n++,e.replies[r].replies.length>0&&t(e.replies[r])}(t),n}(a):null;return o.a.createElement(o.a.Fragment,null,o.a.createElement(xn,null,n?o.a.createElement(wn,null,"Pinned by moderators"):null,o.a.createElement(vn,null,a.deleted?o.a.createElement("p",null,"Posted by [deleted]"):o.a.createElement("p",null,"Posted by ",e),o.a.createElement("p",null,Object(rn.a)(Date.now(),r,{includeSeconds:!0})," ","ago")),a.deleted?o.a.createElement(jn,null,"[deleted]"):"post"===a.postType?o.a.createElement(jn,null,a.title):"media"===a.postType?o.a.createElement(Ut,{title:a.title,media:a.postMedia}):"link"===a.postType?o.a.createElement(en,{title:a.title,url:a.postLink,preview:a.linkPreview}):void 0),o.a.createElement(On,{pinned:n},o.a.createElement(yn,null,o.a.createElement(Cn,{as:wt.a}),"  "+i," ",1===i?"comment":"comments"),o.a.createElement(kn,null,"share")))},Pn=e(15),zn=Object(r.createContext)({});function Tn(){var t=Object(l.a)(["\n\tfont-size: ",";\n\tcolor: ",";\n\tpadding: 6px 0;\n\tcursor: default;\n\tfont-weight: bold;\n"]);return Tn=function(){return t},t}function In(){var t=Object(l.a)(["\n\tborder-radius: 4px;\n\tcolor: ",";\n\tbackground-color: ",";\n\t&&:hover {\n\t\tcolor: ",";\n\t\tbackground-color: ",";\n\t\tcursor: pointer;\n\t}\n"]);return In=function(){return t},t}function Vn(){var t=Object(l.a)(["\n\theight: 100%;\n\tcolor: gray;\n\tgrid-column: 1;\n\t&& > div {\n\t\tpadding: 10px 0 0 8px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t}\n"]);return Vn=function(){return t},t}var Mn=p.d.div(Vn()),Bn=p.d.svg(In(),(function(t){if(t.direction===t.uservote)return"up"===t.direction?t.theme.colors.red:t.theme.colors.blue}),(function(t){return t.direction===t.uservote?t.theme.colors.lightGray:null}),(function(t){return"up"===t.direction?t.theme.colors.red:t.theme.colors.blue}),(function(t){return t.theme.colors.lightGray})),Ln=p.d.p(Tn(),(function(t){return t.theme.font.size.xs}),(function(t){return"up"===t.userVote?t.theme.colors.red:"down"===t.userVote?t.theme.colors.blue:"black"})),An=function(t){var n=t.id,e=t.vote,a=Object(r.useContext)(zn),i=a.castPostVote,c=a.user,l=Object(r.useState)(null),s=Object(u.a)(l,2),d=s[0],p=s[1];return Object(r.useEffect)((function(){c.postVotes&&c.postVotes.hasOwnProperty(n)&&p(c.postVotes[n])}),[d,p,n,c.postVotes]),o.a.createElement(Mn,null,o.a.createElement("div",null,o.a.createElement(Bn,{as:Pn.b,onClick:function(t){return i(t,"up",n,e,p,"home")},direction:"up",uservote:d}),o.a.createElement(Ln,{userVote:d},e),o.a.createElement(Bn,{as:Pn.a,onClick:function(t){return i(t,"down",n,e,p,"home")},direction:"down",uservote:d})))};function Dn(){var t=Object(l.a)(["\n\tbackground-color: ",";\n\tborder-color: ",";\n\tcolor: white;\n\tborder-radius: 4px;\n\tborder: none;\n\tdisplay: block;\n\tmargin: 32px auto 24px auto;\n\tpadding: 8px 16px;\n\t&&:hover {\n\t\tbackground-color: ",";\n\t}\n"]);return Dn=function(){return t},t}function Un(){var t=Object(l.a)(["\n\twidth: 100%;\n\tmin-height: 152px;\n\t","\n\tdisplay: grid;\n\tgrid-template-columns: 40px 1fr;\n\tgrid-template-rows: 1fr 32px;\n\tmargin-bottom: 12px;\n\tcursor: pointer;\n\t&&:hover {\n\t\tborder: solid 1px rgb(137, 137, 137);\n\t}\n"]);return Un=function(){return t},t}function _n(){var t=Object(l.a)(["\n\tgrid-column: 1;\n"]);return _n=function(){return t},t}var Gn=p.d.div(_n()),Fn=p.d.div(Un(),w),Wn=p.d.button(Dn(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.lightBlue})),qn=function(t){var n=t.posts,e=t.children,r=t.viewPostComments,a=Object(d.f)();return o.a.createElement(Gn,null,n&&n.map((function(t,n){var e=t.title.replace(/\W/g,"").toLowerCase();return o.a.createElement(Fn,{key:n,onClick:function(){return function(t,n){r(t),a.push("/comments/".concat(n,"/").concat(t))}(t.id,e)}},o.a.createElement(Sn,{username:t.username,timestamp:t.timestamp,post:t}),o.a.createElement(An,{vote:t.vote,id:t.id}))})),e,o.a.createElement(Wn,{onClick:function(){return window.scrollTo({top:0,behavior:"smooth"})}},"Back To Top"))};function Rn(){var t=Object(l.a)(["\n\theight: 34px;\n\twidth: 100%;\n\tborder-radius: 4px;\n\tfont-size: 16px;\n\ttext-indent: 10px;\n\tmargin-top: 10px;\n\tmargin-left: 24px;\n\tmargin-right: 24px;\n\tborder: solid 0.5px white;\n\t&&:hover {\n\t\tborder: 0.5px solid rgb(0, 121, 211);\n\t}\n"]);return Rn=function(){return t},t}function Nn(){var t=Object(l.a)(["\n\tposition: relative;\n\ttop: 10px;\n\tleft: 12px;\n\tfont-size: 36px;\n\tcolor: ",";\n"]);return Nn=function(){return t},t}function Jn(){var t=Object(l.a)(["\n\theight: 54px;\n\t","\n\tmargin-bottom: 18px;\n\tdisplay: flex;\n\tflex-direction: row;\n"]);return Jn=function(){return t},t}var Hn=p.d.div(Jn(),w),Xn=p.d.svg(Nn(),(function(t){return t.theme.colors.grey})),Yn=p.d.input(Rn());function Zn(){var t=Object(d.f)();return o.a.createElement(Hn,null,o.a.createElement(Xn,{as:wt.c}),o.a.createElement(Yn,{placeholder:"Create Post",type:"text",onFocus:function(){return t.push("/submit")}}))}function Kn(){var t=Object(l.a)(["\n\tgrid-column: 2;\n"]);return Kn=function(){return t},t}function $n(){var t=Object(l.a)(["\n\tgrid-column: 1;\n"]);return $n=function(){return t},t}function Qn(){var t=Object(l.a)(["\n\twidth: calc(100% - 32px);\n\tmax-width: 960px;\n\tmargin: 0 auto;\n\tdisplay: grid;\n\tgrid-template-columns: 1fr 310px;\n\tgrid-template-rows: auto;\n\tgrid-gap: 24px;\n\tpadding-top: 24px;\n\t@media screen and (max-width: 960px) {\n\t\tgrid-template-columns: 1fr;\n\t\tmax-width: 869px;\n\t}\n\t@media screen and (max-width: 600px) {\n\t\twidth: 100%;\n\t}\n"]);return Qn=function(){return t},t}var te=p.d.div(Qn()),ne=p.d.div($n()),ee=p.d.div(Kn());function re(t){var n=t.posts,e=t.sortPosts,a=t.sortBy,i=t.displayFeedSort,c=t.children,l=t.viewPostComments,s=t.user,d=Object(r.useState)(window.innerWidth),p=Object(u.a)(d,2),f=p[0],m=p[1];return _t(m),o.a.createElement(te,null,o.a.createElement(ne,null,i?o.a.createElement(o.a.Fragment,null,s.isSignedIn?o.a.createElement(Zn,{key:"create post"}):null,o.a.createElement(rt,{sortPosts:e,sortBy:a,key:"sort posts"}),o.a.createElement(qn,{posts:n,key:"feed",viewPostComments:l})):null,c),f>960?o.a.createElement(ee,null,o.a.createElement(Et,null)):null)}function oe(){var t=Object(l.a)(["\n\tmin-height: 48px;\n"]);return oe=function(){return t},t}function ae(){var t=Object(l.a)(["\n\tmin-height: 48px;\n"]);return ae=function(){return t},t}function ie(){var t=Object(l.a)(["\n\tcolor: white;\n\tbackground-color: ",";\n\tborder: 1px solid white;\n\tline-height: 24px;\n\tdisplay: inline;\n\tposition: absolute;\n\tright: 8px;\n\tbottom: 52px;\n\t:hover {\n\t\tbackground-color: ",";\n\t}\n"]);return ie=function(){return t},t}function ce(){var t=Object(l.a)(["\n\tcolor: ",";\n\tbackground-color: white;\n\tborder: 1px solid ",";\n\tline-height: 24px;\n\tdisplay: inline;\n\tposition: absolute;\n\tright: 90px;\n\tbottom: 52px;\n\t:hover {\n\t\tcolor: ",";\n\t\tborder: 1px solid ",";\n\t}\n"]);return ce=function(){return t},t}function ue(){var t=Object(l.a)(["\n\twidth: calc(100% - 42px);\n\tpadding: 8px;\n\tmargin-left: 12px;\n\tmargin-bottom: 92px;\n\ttext-indent: 10px;\n\tborder-radius: 4px;\n\tmin-height: 122px;\n\tfont-size: 16px;\n\toutline: none;\n\tborder: solid 0.5px white;\n\t&&:focus,\n\t:hover {\n\t\tborder: solid 0.5px black;\n\t}\n"]);return ue=function(){return t},t}function le(){var t=Object(l.a)(["\n\twidth: calc(100% - 42px);\n\ttext-indent: 10px;\n\tborder-radius: 4px;\n\tfont-size: 16px;\n\toutline: none;\n\tpadding: 8px;\n\tmargin: 8px 8px 16px 12px;\n\tborder: solid 0.5px white;\n\t&&:focus,\n\t:hover {\n\t\tborder: solid 0.5px black;\n\t}\n"]);return le=function(){return t},t}function se(){var t=Object(l.a)(["\n\tposition: relative;\n"]);return se=function(){return t},t}var de=p.d.form(se()),pe=p.d.input(le()),fe=p.d.textarea(ue()),me=p.d.button(ce(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.lightBlue}),(function(t){return t.theme.colors.lightBlue})),be=p.d.button(ie(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.lightBlue})),he=Object(p.d)(fe)(ae()),ge=Object(p.d)(fe)(oe());function xe(t){var n=t.onSubmit,e=t.onCancel,r=t.setPostText,a=t.setPostLink,i=t.postLink,c=t.postMedia,u=t.setPostMedia,l=t.setTitle,s=t.title,d=t.postText,p=t.inputShown;return o.a.createElement(de,{onSubmit:function(t){t.preventDefault(),"media"===p?function(t){if(null!==t.match(/\.(jpeg|jpg|gif|png)$/))return function(t,n){return new Promise((function(e,r){var o,a=n||5e3,i=new Image;i.onerror=i.onabort=function(){clearTimeout(o),e(!1)},i.onload=function(){clearTimeout(o),e({mediaType:"image",url:t})},o=setTimeout((function(){i.src="//!!!!/test.jpg",e(!1)}),a),i.src=t}))}(t).catch((function(t){return console.log(t)}));if(t.includes("youtube")||t.includes("youtu.be")){var n=function(t){var n=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return n&&11===n[2].length?n[2]:null}(t);return n?Promise.resolve({mediaType:"video",url:"https://www.youtube.com/embed/"+n}):Promise.resolve(!1)}return Promise.resolve(!1)}(c).then((function(t){t?n(t):alert("Invalid media, only youtube links and image formats (.jpeg, .jpg, .png, .gif) currently supported")})):n()}},o.a.createElement(pe,{type:"text",value:s,required:!0,onChange:function(t){return l(t.currentTarget.value)},placeholder:"Title",maxLength:"300"}),"post"===p&&o.a.createElement(fe,{value:d,onChange:function(t){return r(t.currentTarget.value)},placeholder:"Text (optional)",maxLength:"1600"}),"media"===p&&o.a.createElement(he,{placeholder:"Url",onChange:function(t){return u(t.target.value)},value:c,required:!0}),"link"===p&&o.a.createElement(ge,{placeholder:"Url",onChange:function(t){return a(t.target.value)},value:i,required:!0}),o.a.createElement(me,{type:"button",onClick:function(){return e()}},"Cancel"),o.a.createElement(be,{type:"submit"},"Post"))}var ve=e(29),je=e(54),Oe=e.n(je);function Ee(){var t=Object(l.a)(["\n\tcolor: ",";\n\tfont-size: 18px;\n\tpadding-top: 21px;\n\tpadding-right: 8px;\n"]);return Ee=function(){return t},t}function we(){var t=Object(l.a)(["\n\tbackground-color: ",";\n\theight: 2px;\n\twidth: 100%;\n"]);return we=function(){return t},t}function ye(){var t=Object(l.a)([""]);return ye=function(){return t},t}function ke(){var t=Object(l.a)([""]);return ke=function(){return t},t}function Ce(){var t=Object(l.a)(["\n\tcolor: ",";\n\tpadding-top: 20px;\n\tfont-size: 16px;\n\t@media screen and (max-width: 400px) {\n\t\tpadding-bottom: 16px;\n\t}\n\t/* padding: 24px 0 12px 10%; */\n"]);return Ce=function(){return t},t}function Se(){var t=Object(l.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmin-height: 62px;\n\tcursor: pointer;\n\t&& > div {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t}\n"]);return Se=function(){return t},t}function Pe(){var t=Object(l.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\twidth: 100%;\n"]);return Pe=function(){return t},t}function ze(){var t=Object(l.a)(["\n\tborder-radius: 4px;\n\tbackground: white;\n\theight: 2px;\n\tborder-radius: 4px;\n\tmargin-top: 4px;\n\tmargin-bottom: 16px;\n"]);return ze=function(){return t},t}function Te(){var t=Object(l.a)(["\n\tpadding-left: 4px;\n"]);return Te=function(){return t},t}function Ie(){var t=Object(l.a)(["\n\t",";\n\tgrid-row: 1;\n"]);return Ie=function(){return t},t}var Ve=p.d.div(Ie(),w),Me=p.d.h3(Te()),Be=p.d.div(ze()),Le=p.d.div(Pe()),Ae=p.d.div(Se()),De=p.d.p(Ce(),(function(t){return t.inputshown===t.label?t.theme.colors.blue:t.theme.colors.gray})),Ue=Object(p.d)(De)(ke()),_e=Object(p.d)(De)(ye()),Ge=p.d.div(we(),(function(t){return t.inputshown===t.label?t.theme.colors.blue:"white"})),Fe=p.d.svg(Ee(),(function(t){return t.inputshown===t.label?t.theme.colors.blue:t.theme.colors.gray}));function We(){var t=Object(r.useState)(""),n=Object(u.a)(t,2),e=n[0],a=n[1],i=Object(r.useState)(""),l=Object(u.a)(i,2),s=l[0],p=l[1],f=Object(r.useState)(""),h=Object(u.a)(f,2),g=h[0],v=h[1],j=Object(r.useState)(""),O=Object(u.a)(j,2),E=O[0],w=O[1],y=Object(r.useState)("post"),C=Object(u.a)(y,2),z=C[0],T=C[1],I=Object(r.useContext)(zn),V=I.user,M=I.setUser,B=I.setPosts,L=I.posts,A=Object(d.f)(),D=function(){var t=Object(b.a)(m.a.mark((function t(){var n,r,o,i,u,l,d=arguments;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=d.length>0&&void 0!==d[0]?d[0]:null,r=Date.now(),o=Object(on.a)(),i=function(){var t=Object(b.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe.a.get("https://api.linkpreview.net/?key=".concat("9e9b0ecbf81675d816ae8481e5c3a3e9","&q=").concat(E)).then((function(t){return t.data.image})).catch((function(t){return console.error(t)}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(t){var n=t.img,a=void 0===n?null:n,i=t.media,u=void 0===i?null:i;x.firestore().collection("posts").doc(o).set({postType:z,linkPreview:a,title:e,postText:s,postMedia:u,postLink:E,timestamp:r,vote:1,username:V.username,replies:[],id:o,deleted:!1}).then((function(){B([{postType:z,linkPreview:a,title:e,postText:s,postMedia:u,postLink:E,timestamp:r,vote:1,username:V.username,replies:[],id:o,deleted:!1}].concat(Object(k.a)(L)))})),x.firestore().collection("users").doc(V.uid).update({posts:[].concat(Object(k.a)(V.posts),[{title:e,postText:s,timestamp:r,postID:o,uid:V.uid}])}),x.firestore().collection("users").doc(V.uid).get().then((function(t){var n=t.data();M(Object(c.a)({},n,{isSignedIn:!0,isAnonymous:!1,posts:[].concat(Object(k.a)(V.posts),[{postID:o,postText:s,title:e,timestamp:r,uid:V.uid}])}))}))},!V){t.next=19;break}if("link"!==z){t.next=13;break}return t.next=9,i();case 9:l=t.sent,u(l),t.next=14;break;case 13:u({media:n});case 14:a(""),p(""),A.push("/"),t.next=20;break;case 19:alert("you must sign in to create a post :)");case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U={inputshown:z,label:"post"},_={inputshown:z,label:"media"},G={inputshown:z,label:"link"};return o.a.createElement(ei,null,o.a.createElement(re,{displayFeedSort:!1},o.a.createElement("div",null,o.a.createElement(Me,null,"Create a post"),o.a.createElement(Be,null),o.a.createElement(Ve,null,o.a.createElement(Le,null,o.a.createElement(Ae,{onClick:function(){return T("post")}},o.a.createElement("div",null,o.a.createElement(Fe,Object.assign({as:ve.b},U)),o.a.createElement(De,U,"Post")),o.a.createElement(Ge,U)),o.a.createElement(Ae,Object.assign({onClick:function(){return T("media")}},_),o.a.createElement("div",null,o.a.createElement(Fe,Object.assign({as:S.c},_)),o.a.createElement(Ue,_,"Image & Video")),o.a.createElement(Ge,_)),o.a.createElement(Ae,{onClick:function(){return T("link")}},o.a.createElement("div",null,o.a.createElement(Fe,Object.assign({as:P.a},G)),o.a.createElement(_e,G,"Link")),o.a.createElement(Ge,G))),o.a.createElement(xe,{onCancel:function(){var t=function(){a(""),p(""),A.push("/")};e.length>0||s.length>0?window.confirm("Are you sure you want to leave this page? Your post will not be saved.")&&t():t()},onSubmit:D,setTitle:a,setPostText:p,title:e,postText:s,postMedia:g,setPostMedia:v,postLink:E,setPostLink:w,inputShown:z})))))}function qe(t){var n=t.posts,e=t.sortPosts,r=t.sortBy,a=t.viewPostComments,i=t.user;return o.a.createElement(ei,null,o.a.createElement(re,{posts:n,sortPosts:e,sortBy:r,displayFeedSort:!0,viewPostComments:a,user:i}))}function Re(){var t=Object(l.a)(["\n\t&& > div {\n\t\tpadding: 2px 0 0 8px;\n\t}\n"]);return Re=function(){return t},t}function Ne(){var t=Object(l.a)(["\n\tposition: relative;\n\ttop: 2.5px;\n\tleft: -4px;\n"]);return Ne=function(){return t},t}function Je(){var t=Object(l.a)(["\n\tfont-size: ",";\n\tcolor: ",";\n\tpadding: 6px 0;\n\tcursor: default;\n\tfont-weight: bold;\n"]);return Je=function(){return t},t}function He(){var t=Object(l.a)(["\n\tposition: absolute;\n\tbottom: 8px;\n\tright: 116px;\n\tcolor: ",";\n\tpadding: 6px 18px;\n\tbackground: white;\n\ttext-transform: uppercase;\n\toutline: none;\n\tborder: none;\n\t&&:hover {\n\t\tcolor: ",";\n\t}\n"]);return He=function(){return t},t}function Xe(){var t=Object(l.a)(["\n\tmargin-top: 4px;\n\tpadding-left: 8px;\n\tborder-radius: 4px;\n\t&&:hover {\n\t\tborder: solid 0.5px black;\n\t}\n\tborder: solid 0.5px black;\n\tposition: relative;\n"]);return Xe=function(){return t},t}function Ye(){var t=Object(l.a)(["\n\tgrid-column: 2;\n\tmargin-right: 64px;\n\tmargin-top: 16px;\n\tpadding-left: ",";\n\t@media screen and (max-width: 600px) {\n\t\tmargin-right: 8px;\n\t\tpadding-left: 40px;\n\t}\n"]);return Ye=function(){return t},t}function Ze(){var t=Object(l.a)(["\n\tpadding: 4px 8px;\n"]);return Ze=function(){return t},t}function Ke(){var t=Object(l.a)(["\n\tposition: absolute;\n\tbottom: 4px;\n\tleft: 8px;\n"]);return Ke=function(){return t},t}function $e(){var t=Object(l.a)(["\n\tmargin-bottom: 32px;\n\tpadding-left: 8px;\n\tpadding-right: 48px;\n"]);return $e=function(){return t},t}function Qe(){var t=Object(l.a)(["\n\tfont-size: 12px;\n\tmargin-bottom: 4px;\n\tpadding-left: 8px;\n\tcolor: ",";\n"]);return Qe=function(){return t},t}function tr(){var t=Object(l.a)(["\n\tgrid-column: 2;\n\tposition: relative;\n"]);return tr=function(){return t},t}function nr(){var t=Object(l.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: 40px 1fr;\n\tmargin: 16px 16px 16px 0;\n\tpadding-left: ",";\n"]);return nr=function(){return t},t}var er=p.d.div(nr(),(function(t){if(t.depth>0){var n=28*t.depth;return n=n.toString()+"px"}})),rr=p.d.div(tr()),or=p.d.p(Qe(),(function(t){return t.theme.colors.gray})),ar=p.d.p($e()),ir=p.d.div(Ke()),cr=Object(p.d)(En)(Ze()),ur=p.d.div(Ye(),(function(t){var n=28*t.depth+76;return n=n.toString()+"px"})),lr=p.d.div(Xe()),sr=p.d.button(He(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.lightBlue})),dr=p.d.p(Je(),(function(t){return t.theme.font.size.xs}),(function(t){return"up"===t.userVote?t.theme.colors.red:"down"===t.userVote?t.theme.colors.blue:"black"})),pr=p.d.svg(Ne()),fr=p.d.div(Re());function mr(t){var n=t.comment,e=t.post,a=t.user,i=t.setModalContent,l=t.setPostData,s=t.setUser,d=t.commentSortMethod,p=Object(r.useState)(),f=Object(u.a)(p,2),m=f[0],b=f[1],h=Object(r.useState)(!1),g=Object(u.a)(h,2),v=g[0],j=g[1],O=Object(r.useState)(null),E=Object(u.a)(O,2),w=E[0],y=E[1];Object(r.useEffect)((function(){a.commentVotes&&a.commentVotes.hasOwnProperty(n.id)&&y(a.commentVotes[n.id])}),[w,y,n.id,a.commentVotes]);var k=function(){var t=n.depth+1,r=m,o=a.username,i=cn({commentInput:r,username:o,depth:t}),u=function t(n,e,r){return n.id===e?n.replies.push(r):n.replies.forEach((function(n){t(n,e,r)})),n.replies}(e,n.id,i);x.firestore().collection("posts").doc(e.id).update({replies:u}).then((function(){return l(Object(c.a)({},e,{replies:u}))})).catch((function(t){return console.log(t)}))},C=function(t,r){var o;if(t.stopPropagation(),a.isSignedIn)if(a.commentVotes[n.id]===r);else{o="up"===a.commentVotes[n.id]?n.points-2:"down"===a.commentVotes[n.id]?n.points+2:"up"===r?n.points+1:n.points-1;var u=function t(n,e,r){return n.id===e?n.points=r:n.replies.forEach((function(n){t(n,e,r)})),n}(Object(c.a)({},e),n.id,o);l(u);var d=Object(c.a)({},a.commentVotes);d[n.id]=r,s(Object(c.a)({},a,{commentVotes:d})),y(r),x.firestore().collection("posts").doc(e.id).update({replies:u.replies}).catch((function(t){return console.log(t)})),x.firestore().collection("users").doc(a.uid).update({commentVotes:d}).catch((function(t){return console.log(t)}))}else i("signup")};return o.a.createElement(o.a.Fragment,null,o.a.createElement(er,{depth:n.depth},o.a.createElement(fr,{as:Mn},o.a.createElement("div",null,o.a.createElement(Io,{as:Pn.b,onClick:function(t){return C(t,"up")},direction:"up",uservote:w}),o.a.createElement(dr,{userVote:w},n.points),o.a.createElement(Io,{as:Pn.a,onClick:function(t){return C(t,"down")},direction:"down",uservote:w}))),o.a.createElement(rr,null,o.a.createElement(or,null,n.deleted?"[deleted]":n.username," ",n.points," ",1===n.points?"point":"points"," \u2022"," ",Object(rn.a)(Date.now(),n.timestamp)," ago"),o.a.createElement(ar,null,n.deleted?"[deleted]":n.commentInput),o.a.createElement(ir,null,o.a.createElement(cr,{onClick:function(t){return j(!0)}},o.a.createElement(pr,{as:wt.a}),"Reply"),a.username===n.username?o.a.createElement(cr,{onClick:function(){return function(){if(window.confirm("Are you sure you want to delete this comment? There is no undo.")){var t=function t(n,e){return n.id===e?n.deleted=!0:n.replies.forEach((function(n){t(n,e)})),n.replies}(e,n.id);x.firestore().collection("posts").doc(e.id).update({replies:t}).then((function(){return l(Object(c.a)({},e,{replies:t}))})).catch((function(t){return console.log(t)}))}}()}},"Delete"):null))),v?n.depth>=3?alert("Sorry, deeply nested replies are currently disabled."):a.isSignedIn?o.a.createElement(ur,{depth:n.depth},o.a.createElement(lr,null,o.a.createElement(yo,{placeholder:"What are your thoughts?",value:m,onChange:function(t){return b(t.target.value)}}),o.a.createElement(sr,{type:"button",onClick:function(){return j(!1)}},"cancel"),o.a.createElement(ko,{type:"button",onClick:k,isSignedIn:a},"comment"))):void i("signup"):null,n.replies&&Object(c.a)({},n).replies.sort(d).map((function(t){return o.a.createElement(mr,{comment:t,key:Object(on.a)(),post:e,user:a,setModalContent:i,setPostData:l,setUser:s,commentSortMethod:d})})))}var br=e(55),hr=e(30);function gr(){var t=Object(l.a)(["\n\tpadding-right: 16px;\n\tcursor: pointer;\n"]);return gr=function(){return t},t}function xr(){var t=Object(l.a)(["\n\theight: 45px;\n\tbackground: white;\n\tcursor: ",";\n\t&&:hover {\n\t\tbackground: ",";\n\t\tcolor: white;\n\t\t"," {\n\t\t\tcolor: white;\n\t\t}\n\t}\n\t&& > div {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tpadding-top: 14px;\n\t\tpadding-left: 16px;\n\t\tborder-radius: 4px;\n\t}\n\t&& > div > p {\n\t\tpadding-left: 16px;\n\t\tfont-size: 14px;\n\t}\n"]);return xr=function(){return t},t}function vr(){var t=Object(l.a)(["\n\tposition: relative;\n\tfont-size: 16px;\n\tcursor: pointer;\n\ttop: 1px;\n\tcolor: ",";\n"]);return vr=function(){return t},t}function jr(){var t=Object(l.a)(["\n\tcolor: ",";\n\tmargin-right: -8px;\n\tfont-size: 40px;\n\tcursor: pointer;\n"]);return jr=function(){return t},t}function Or(){var t=Object(l.a)(["\n\tposition: absolute;\n\ttop: ",";\n\tright: 8px;\n\twidth: 200px;\n\tborder-radius: 4px;\n\tbox-shadow: 0px 0px 17px 2px rgba(0, 0, 0, 0.22);\n\tz-index: 1000;\n\t&& > div:first-child {\n\t\tborder-top-left-radius: 4px;\n\t\tborder-top-right-radius: 4px;\n\t}\n\t&& > div:last-child {\n\t\tborder-bottom-left-radius: 4px;\n\t\tborder-bottom-right-radius: 4px;\n\t}\n"]);return Or=function(){return t},t}function Er(){var t=Object(l.a)(["\n\tpadding-left: 10px;\n\tdisplay: flex;\n\tflex-direction: row;\n"]);return Er=function(){return t},t}function wr(){var t=Object(l.a)(["\n\tcolor: ",";\n\tpadding: 0 0 0 0;\n\tcursor: pointer;\n"]);return wr=function(){return t},t}function yr(){var t=Object(l.a)(["\n\tcolor: ",";\n\tfont-size: ",";\n\tpadding: 12px 0 4px 0;\n\tcursor: pointer;\n"]);return yr=function(){return t},t}function kr(){var t=Object(l.a)(["\n\theight: 90px;\n\toverflow: hidden;\n\tpadding-left: 16px;\n\tpadding-right: 16px;\n\tpadding-bottom: 8px;\n\tborder-bottom-right-radius: 4px;\n\tborder-bottom-left-radius: 4px;\n\tcursor: pointer;\n\t&&:hover {\n\t\tbackground: ",";\n\t}\n"]);return kr=function(){return t},t}function Cr(){var t=Object(l.a)(["\n\tposition: absolute;\n\tmax-height: 360px;\n\toverflow: scroll;\n\twidth: ",";\n\ttop: ",";\n\tleft: ",";\n\tbackground: white;\n\tborder-bottom-right-radius: 4px;\n\tborder-bottom-left-radius: 4px;\n\tbox-shadow: 0px 0px 17px 2px rgba(0, 0, 0, 0.22);\n\tz-index: 1000;\n"]);return Cr=function(){return t},t}function Sr(){var t=Object(l.a)(["\n\tcolor: white;\n\tbackground-color: ",";\n\tborder: 1px solid white;\n\tline-height: 24px;\n\t:hover {\n\t\tbackground-color: ",";\n\t}\n"]);return Sr=function(){return t},t}function Pr(){var t=Object(l.a)(["\n\tcolor: ",";\n\tbackground-color: white;\n\tborder: 1px solid ",";\n\tline-height: 24px;\n\tmargin-left: 16px;\n\t:hover {\n\t\tcolor: ",";\n\t\tborder: 1px solid ",";\n\t}\n"]);return Pr=function(){return t},t}function zr(){var t=Object(l.a)(["\n\theight: 34px;\n\twidth: 100%;\n\tborder-radius: 4px;\n\tfont-size: 16px;\n\ttext-indent: 10px;\n\tborder: 0.5px solid rgb(0, 121, 211);\n\tmax-width: 598px;\n\tmargin: 0 auto;\n\t&&:hover {\n\t\tborder: 0.5px solid rgb(0, 121, 211);\n\t}\n"]);return zr=function(){return t},t}function Tr(){var t=Object(l.a)(["\n\tborder-radius: 50%;\n\theight: 34px;\n\twidth: 34px;\n\tmin-width: 34px;\n\tbackground: rgb(255, 69, 0);\n\tmargin: 8px 8px 8px 0;\n"]);return Tr=function(){return t},t}function Ir(){var t=Object(l.a)(["\n\tbackground: white;\n\theight: 48px;\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tpadding: 0 16px;\n\tfont-family: ",";\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: 1000;\n"]);return Ir=function(){return t},t}var Vr=p.d.div(Ir(),(function(t){return t.theme.font.family[0]})),Mr=p.d.div(Tr()),Br=p.d.input(zr()),Lr=p.d.button(Pr(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.lightBlue}),(function(t){return t.theme.colors.lightBlue})),Ar=p.d.button(Sr(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.lightBlue})),Dr=p.d.div(Cr(),(function(t){return t.width+"px"}),(function(t){return t.top+"px"}),(function(t){return t.left+"px"})),Ur=p.d.div(kr(),(function(t){return t.theme.colors.veryLightGray})),_r=p.d.div(yr(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.font.size.m})),Gr=p.d.div(wr(),(function(t){return t.theme.colors.gray})),Fr=p.d.div(Er()),Wr=p.d.div(Or(),(function(t){return t.top+"px"})),qr=p.d.svg(jr(),(function(t){return t.theme.colors.grey})),Rr=p.d.svg(vr(),(function(t){return t.theme.colors.grey})),Nr=p.d.div(xr(),(function(t){return t.action?"pointer":null}),(function(t){return t.theme.colors.blue}),Rr),Jr=p.d.h2(gr());function Hr(t){var n=t.openModal,e=t.closeModal,a=t.viewPostComments,i=Object(r.useContext)(zn),c=i.user,l=i.setUser,p=i.posts,f=Object(r.useState)(""),m=Object(u.a)(f,2),b=m[0],h=m[1],g=Object(r.useRef)(null),v=function(t,n){var e=Object(r.useState)(0),o=Object(u.a)(e,2),a=o[0],i=o[1],c=Object(r.useState)(0),l=Object(u.a)(c,2),s=l[0],d=l[1],p=Object(r.useState)(0),f=Object(u.a)(p,2),m=f[0],b=f[1];return Object(r.useLayoutEffect)((function(){function n(){var n=t.current.getBoundingClientRect().right,e=t.current.getBoundingClientRect().left;i(t.current.getBoundingClientRect().bottom),b(e),d(n-e)}return window.addEventListener("resize",n),n(),function(){return window.removeEventListener("resize",n)}}),[m,s,a,t,n]),{searchBarBottom:a,searchBarWidth:s,searchBarLeft:m}}(g,c.isSignedIn),j=v.searchBarWidth,O=v.searchBarBottom,E=v.searchBarLeft,w=Object(r.useState)(!1),y=Object(u.a)(w,2),k=y[0],C=y[1],P=Object(r.useState)([]),z=Object(u.a)(P,2),T=z[0],I=z[1],V=Object(r.useState)(!1),M=Object(u.a)(V,2),B=M[0],L=M[1],A=Object(d.f)(),D=Object(r.useState)(),U=Object(u.a)(D,2),_=U[0],G=U[1];_t(G);var F=function(){c.isSignedIn?(x.auth().signOut().then((function(){e(null),l(!1)}),(function(t){console.error("Sign Out Error",t)})),L(!1)):(n("login"),L(!1))};return o.a.createElement(Vr,null,o.a.createElement(Mr,{as:s.b,to:"/"}),_>480?o.a.createElement(Jr,{onClick:function(){return A.push("/")}},"fpotfp"):null,o.a.createElement(Br,{type:"text",placeholder:"Search",onChange:function(t){return function(t){C(!0),h(t);var n,e=(n=b,p.filter((function(t){return-1!==t.title.indexOf(n)||-1!==t.postText.indexOf(n)})));I(e)}(t.target.value)},value:b,ref:g}),k&&o.a.createElement(Dr,{top:O,left:E,width:j,onMouseLeave:function(){return C(!1)}},b.length>0&&0===T.length?o.a.createElement(Ur,{key:"no-results"},o.a.createElement(_r,null),o.a.createElement(Gr,null,"No results found...")):b.length>0?T.map((function(t,n){var e=t.title.replace(/\W/g,"").toLowerCase();return o.a.createElement(Ur,{key:n,onClick:function(){return function(t,n){a(t),A.push("/comments/".concat(n,"/").concat(t)),C(!1),h("")}(t.id,e)}},o.a.createElement(_r,null,t.title),o.a.createElement(Gr,null,t.postText))})):null),c.isSignedIn||_<640?null:o.a.createElement(o.a.Fragment,null,o.a.createElement(Lr,{type:"button",onClick:function(){n("login")}},"log in"),o.a.createElement(Ar,{type:"button",onClick:function(){n("signup")}},"sign up")),o.a.createElement(Fr,null,o.a.createElement(qr,{as:S.b,onClick:function(){return L(!B)}})),B?o.a.createElement(Wr,{top:O,onMouseLeave:function(){return L(!1)}},c.isSignedIn?o.a.createElement(o.a.Fragment,null,o.a.createElement(Nr,null,o.a.createElement("div",null,o.a.createElement(Rr,{as:wt.c}),o.a.createElement("p",null,c.username))),o.a.createElement(Nr,{action:"true",onClick:function(){A.push("/submit"),L(!1)}},o.a.createElement("div",null,o.a.createElement(Rr,{as:hr.a}),o.a.createElement("p",null,"Create Post")))):null,o.a.createElement(Nr,{action:"true",onClick:function(){return F()}},o.a.createElement("div",null,o.a.createElement(Rr,{as:br.a}),o.a.createElement("p",null,c.isSignedIn?"Log Out":"Log In / Sign Up")))):null)}function Xr(){var t=Object(l.a)(["\n\theight: 32px;\n\tfont-size: 14px;\n\tcolor: ",";\n\t&&:hover {\n\t\tbackground-color: ",";\n\t\tcolor: white;\n\t}\n\t&& > p {\n\t\tpadding: 8px;\n\t\ttext-transform: capitalize;\n\t}\n"]);return Xr=function(){return t},t}function Yr(){var t=Object(l.a)(["\n\tbackground: white;\n\tposition: absolute;\n\ttop: 22px;\n\twidth: 80px;\n\tborder-radius: 4px;\n\tz-index: 1001;\n\tbox-shadow: 0px 0px 17px 2px rgba(0, 0, 0, 0.22);\n\t&& > div:first-child {\n\t\tborder-top-left-radius: 4px;\n\t\tborder-top-right-radius: 4px;\n\t}\n\t&& > div:last-child {\n\t\tborder-bottom-left-radius: 4px;\n\t\tborder-bottom-right-radius: 4px;\n\t}\n"]);return Yr=function(){return t},t}function Zr(){var t=Object(l.a)(["\n\tcolor: ",";\n\tposition: relative;\n\ttop: 2px;\n\tpadding-left: 4px;\n"]);return Zr=function(){return t},t}function Kr(){var t=Object(l.a)(["\n\ttext-transform: uppercase;\n\tcolor: ",";\n\tfont-size: 14px;\n"]);return Kr=function(){return t},t}function $r(){var t=Object(l.a)(["\n\tcursor: pointer;\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin-left: 8px;\n\tposition: relative;\n"]);return $r=function(){return t},t}function Qr(){var t=Object(l.a)(["\n\tborder-radius: 4px;\n\tcolor: ",";\n\tbackground-color: ",";\n\t&&:hover {\n\t\tcolor: ",";\n\t\tbackground-color: ",";\n\t\tcursor: pointer;\n\t}\n"]);return Qr=function(){return t},t}function to(){var t=Object(l.a)(["\n\tdisplay: inline;\n\tposition: absolute;\n\tright: 48px;\n"]);return to=function(){return t},t}function no(){var t=Object(l.a)(["\n\tdisplay: inline;\n\tcolor: ",";\n"]);return no=function(){return t},t}function eo(){var t=Object(l.a)(["\n\tgrid-column: 2;\n\tmargin: 16px 0 0 12px;\n\tpadding: 12px 8px;\n\tposition: relative;\n"]);return eo=function(){return t},t}function ro(){var t=Object(l.a)(["\n\tgrid-column: 1 / 3;\n"]);return ro=function(){return t},t}function oo(){var t=Object(l.a)(["\n\tgrid-column: 2;\n\tmargin-top: 24px;\n\tpadding-left: 8px;\n\tmargin-bottom: 48px;\n\tdisplay: flex;\n\tflex-direction: row;\n\t&& > p:first-child {\n\t\tfont-size: 11px;\n\t\ttext-transform: uppercase;\n\t\tcolor: ",";\n\t\tposition: relative;\n\t\ttop: 3px;\n\t}\n"]);return oo=function(){return t},t}function ao(){var t=Object(l.a)(["\n\tposition: absolute;\n\tborder: none;\n\tbottom: 8px;\n\tright: 8px;\n\tcolor: white;\n\tpadding: 6px 18px;\n\tbackground: ",";\n\ttext-transform: uppercase;\n\t&&:hover {\n\t\tbackground: ",";\n\t}\n"]);return ao=function(){return t},t}function io(){var t=Object(l.a)(["\n\twidth: 100%;\n\tfont-size: 14px;\n\tmin-height: 86px;\n\tpadding: 16px 0 0 16px;\n\tmargin-bottom: 34px;\n\tmax-width: 95%;\n\toutline: none;\n\tborder: none;\n\t@media screen and (max-width: 420px) {\n\t\tpadding-left: 0;\n\t\tmax-width: 96%;\n\t}\n"]);return io=function(){return t},t}function co(){var t=Object(l.a)(["\n\tmargin-top: 4px;\n\tpadding-left: 8px;\n\tborder-radius: 4px;\n\t&&:hover {\n\t\tborder: solid 0.5px black;\n\t}\n\tborder: solid 0.5px black;\n\tposition: relative;\n"]);return co=function(){return t},t}function uo(){var t=Object(l.a)(["\n\tfont-size: 12px;\n\tpadding-top: 8px;\n"]);return uo=function(){return t},t}function lo(){var t=Object(l.a)(["\n\tgrid-column: 2;\n\tmargin-right: 64px;\n\tmargin-top: 16px;\n\tpadding-left: 8px;\n\t@media screen and (max-width: 475px) {\n\t\tgrid-column: 1 / 3;\n\t\tmargin-right: 8px;\n\t}\n"]);return lo=function(){return t},t}function so(){var t=Object(l.a)(["\n\tpadding: 4px 64px 8px 8px;\n"]);return so=function(){return t},t}function po(){var t=Object(l.a)([""]);return po=function(){return t},t}function fo(){var t=Object(l.a)([""]);return fo=function(){return t},t}function mo(){var t=Object(l.a)([""]);return mo=function(){return t},t}function bo(){var t=Object(l.a)(["\n\twidth: 100%;\n\t","\n\tdisplay: grid;\n\tgrid-template-columns: 40px 1fr;\n\tgrid-template-rows: 1fr 32px;\n\tmargin-bottom: 12px;\n"]);return bo=function(){return t},t}var ho=p.d.div(bo(),w),go=Object(p.d)(En)(mo()),xo=Object(p.d)(En)(fo()),vo=Object(p.d)(En)(po()),jo=p.d.p(so()),Oo=p.d.div(lo()),Eo=p.d.p(uo()),wo=p.d.div(co()),yo=p.d.textarea(io()),ko=p.d.button(ao(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.colors.lightBlue})),Co=p.d.div(oo(),(function(t){return t.theme.colors.gray})),So=p.d.div(ro()),Po=p.d.div(eo()),zo=p.d.p(no(),(function(t){return t.theme.colors.gray})),To=p.d.div(to()),Io=p.d.svg(Qr(),(function(t){if(t.direction===t.uservote)return"up"===t.direction?t.theme.colors.red:t.theme.colors.blue}),(function(t){return t.direction===t.uservote?t.theme.colors.lightGray:null}),(function(t){return"up"===t.direction?t.theme.colors.red:t.theme.colors.blue}),(function(t){return t.theme.colors.lightGray})),Vo=p.d.div($r()),Mo=p.d.p(Kr(),(function(t){return t.theme.colors.gray})),Bo=p.d.svg(Zr(),(function(t){return t.theme.colors.gray})),Lo=p.d.div(Yr()),Ao=p.d.div(Xr(),(function(t){return t.theme.colors.gray}),(function(t){return t.theme.colors.blue}));function Do(t){var n=t.post,e=t.user,a=t.setModalContent,i=t.setPostData,l=t.setUser,s=Object(r.useState)(),d=Object(u.a)(s,2),p=d[0],f=d[1],m=Object(r.useState)(),b=Object(u.a)(m,2),h=b[0],g=b[1],v=Object(r.useContext)(zn),j=v.castPostVote,O=v.posts,E=v.setPosts,w=Object(r.useState)(),y=Object(u.a)(w,2),C=y[0],S=y[1];_t(g);var P=Object(r.useState)("top"),z=Object(u.a)(P,2),T=z[0],I=z[1],V=Object(r.useState)(!1),M=Object(u.a)(V,2),B=M[0],L=M[1];Object(r.useEffect)((function(){e.postVotes&&e.postVotes.hasOwnProperty(n.id)&&S(e.postVotes[n.id])}),[C,S,n,e.postVotes]);var A={top:function(t,n){return t.points<=n.points?1:-1},new:function(t,n){return t.timestamp<=n.timestamp?1:-1},old:function(t,n){return t.timestamp>=n.timestamp?1:-1}};return o.a.createElement(ho,null,o.a.createElement(Mn,null,o.a.createElement("div",null,o.a.createElement(Io,{as:Pn.b,onClick:function(t){return j(t,"up",n.id,n.vote,S,"comments")},direction:"up",uservote:C}),o.a.createElement(Ln,null,n.vote),o.a.createElement(Io,{as:Pn.a,onClick:function(t){return j(t,"down",n.id,n.vote,S,"comments")},direction:"down",uservote:C}))),o.a.createElement(xn,null,o.a.createElement(vn,null,o.a.createElement("p",null,"Posted by ",n.username),o.a.createElement("p",null,n.timestamp?Object(rn.a)(Date.now(),n.timestamp,{includeSeconds:!0}):null," ","ago")),n.deleted?o.a.createElement(o.a.Fragment,null,o.a.createElement(jn,null,"[deleted]"),o.a.createElement(jo,null,"[deleted]")):"post"===n.postType?o.a.createElement(o.a.Fragment,null,o.a.createElement(jn,null,n.title),o.a.createElement(jo,null,n.postText)):"media"===n.postType?o.a.createElement(Ut,{title:n.title,media:n.postMedia}):"link"===n.postType?o.a.createElement(en,{title:n.title,url:n.postLink,preview:n.linkPreview}):void 0),o.a.createElement(On,null,o.a.createElement(go,null,n.replies.length," ",1===n.replies.length?"comment":"comments"),o.a.createElement(xo,null,"share"),e.username===n.username?o.a.createElement(vo,{onClick:function(){return function(){if(window.confirm("Are you sure you want to delete this post? This cannot be undone.")){var t=O.map((function(t){return t.id===n.id&&(t.deleted=!0),t}));E(t),x.firestore().collection("posts").doc(n.id).update({deleted:!0}).catch((function(t){return console.log(t)}))}}()}},"Delete"):null),e.isSignedIn?o.a.createElement(Oo,null,o.a.createElement(Eo,null,"Comment as ",e.username),o.a.createElement(wo,null,o.a.createElement(yo,{placeholder:"What are your thoughts?",value:p,onChange:function(t){return f(t.target.value)}}),o.a.createElement(ko,{type:"button",onClick:function(){var t=e.username,r=cn({commentInput:p,username:t});x.firestore().collection("posts").doc(n.id).update({replies:[].concat(Object(k.a)(n.replies),[r])}).then((function(){i(Object(c.a)({},n,{replies:[].concat(Object(k.a)(n.replies),[r])}))})).catch((function(t){return console.log(t)}))}},"comment"))):o.a.createElement(Po,null,o.a.createElement(zo,null,"Log in or sign up to leave a comment"),h>560?o.a.createElement(To,null,o.a.createElement(Lr,{onClick:function(){return a("login")}},"Log In"),o.a.createElement(Ar,{onClick:function(){return a("signup")}},"Sign Up")):null),o.a.createElement(Co,null,o.a.createElement("p",null,"sort by"),o.a.createElement(Vo,{onClick:function(){return L(!B)}},o.a.createElement(Mo,null,T),o.a.createElement(Bo,{as:ve.a}),B?o.a.createElement(Lo,{onMouseLeave:function(){return L(!1)}},o.a.createElement(Ao,{onClick:function(){return I("top")}},o.a.createElement("p",null,"top")),o.a.createElement(Ao,{onClick:function(){return I("new")}},o.a.createElement("p",null,"new")),o.a.createElement(Ao,{onClick:function(){return I("old")}},o.a.createElement("p",null,"old"))):null)),o.a.createElement(So,null,Object(c.a)({},n).replies.sort(A[T]).map((function(t){return o.a.createElement(mr,{comment:t,key:Object(on.a)(),post:n,user:e,setModalContent:a,setPostData:i,setUser:l,commentSortMethod:A[T]})}))))}var Uo={id:1,title:"",username:"",vote:0,timestamp:"",postText:"",replies:[]};function _o(t){var n=t.setModalContent,e=(t.currentPost,t.postData),a=t.viewPostComments,i=t.setPostData,c=t.setUser,u=Object(r.useContext)(zn).user,l=Object(d.g)().id;return Object(r.useEffect)((function(){e||a(l)}),[l,e,a]),o.a.createElement(ei,null,o.a.createElement(re,{displayFeedSort:!1},o.a.createElement(Do,{post:e||Uo,user:u,setModalContent:n,viewPostComments:a,setPostData:i,setUser:c})))}function Go(){var t=Object(l.a)(["\n\tposition: absolute;\n\ttop: 12px;\n\tright: 16px;\n\tfont-size: 30px;\n\tcolor: ",";\n\t&&:hover {\n\t\tcursor: pointer;\n\t}\n"]);return Go=function(){return t},t}function Fo(){var t=Object(l.a)(["\n\twidth: 100%;\n\theight: 220px;\n\tposition: relative;\n"]);return Fo=function(){return t},t}function Wo(){var t=Object(l.a)(["\n\theight: 540px;\n\twidth: 100%;\n\tmargin: 5px 5px 5px 0;\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return Wo=function(){return t},t}function qo(){var t=Object(l.a)(["\n\theight: 100%;\n\twidth: 130px;\n\tbackground: rgba(0, 0, 0, 0);\n\tbackground-color: lightgrey;\n\tborder-top-left-radius: 4px;\n\tborder-bottom-left-radius: 4px;\n\t@media screen and (max-width: 600px) {\n\t\tdisplay: none;\n\t}\n"]);return qo=function(){return t},t}function Ro(){var t=Object(l.a)(["\n\tborder-radius: 4px;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: row;\n"]);return Ro=function(){return t},t}function No(){var t=Object(l.a)(["\n\theight: 550px;\n\twidth: 100%;\n\tmax-width: 750px;\n\tmargin: auto;\n\tborder-radius: 4px;\n\tbackground: white;\n\t@media screen and (max-width: 750px) {\n\t\twidth: calc(100% - 32px);\n\t}\n\t@media screen and (max-width: 375px) {\n\t\twidth: calc(100% - 16px);\n\t}\n"]);return No=function(){return t},t}function Jo(){var t=Object(l.a)(["\n\theight: 120vh;\n\twidth: 100%;\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tmargin: auto;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tdisplay: flex;\n\tjustify-content: space-around;\n\talign-items: center;\n\tz-index: 1005;\n"]);return Jo=function(){return t},t}var Ho=p.d.div(Jo()),Xo=p.d.div(No()),Yo=p.d.div(Ro()),Zo=p.d.div(qo()),Ko=p.d.div(Wo()),$o=p.d.div(Fo()),Qo=p.d.svg(Go(),(function(t){return t.theme.colors.gray}));function ta(t){var n=t.closeModal,e=t.children;return Object(r.useEffect)((function(){return document.body.style.overflow="hidden",function(){return document.body.style.overflow="unset"}}),[]),o.a.createElement(Ho,{onClick:n},o.a.createElement(Xo,{onClick:function(t){return t.stopPropagation()}},o.a.createElement(Yo,null,o.a.createElement(Zo,null),o.a.createElement(Ko,null,o.a.createElement($o,null,o.a.createElement(Qo,{as:hr.b,onClick:n})),e))))}var na=function(t){Object(r.useEffect)((function(){t.current.focus()}),[t])};function ea(){var t=Object(l.a)(["\n\theight: 14px;\n\tpadding-bottom: 4px;\n"]);return ea=function(){return t},t}function ra(){var t=Object(l.a)(["\n\tcolor: ",";\n\tfont-size: ",";\n\tpadding-bottom: 4px;\n"]);return ra=function(){return t},t}function oa(){var t=Object(l.a)(["\n\tdisplay: inline;\n\tfont-size: 12px;\n\tcursor: pointer;\n\tcolor: ",";\n"]);return oa=function(){return t},t}function aa(){var t=Object(l.a)(["\n\tdisplay: inline;\n\tmargin-right: 4px;\n\tfont-size: 12px;\n"]);return aa=function(){return t},t}function ia(){var t=Object(l.a)(["\n\twidth: 178px;\n\theight: 40px;\n\tpadding: 8px;\n\tbackground-color: ",";\n\tcolor: white;\n\ttext-transform: uppercase;\n\tfont-size: ",";\n\ttext-align: center;\n\tborder: none;\n\tmargin: 0 0 8px 0;\n\t&&:hover {\n\t\tbackground-color: ",";\n\t}\n"]);return ia=function(){return t},t}function ca(){var t=Object(l.a)(["\n\tmargin-bottom: 16px;\n"]);return ca=function(){return t},t}function ua(){var t=Object(l.a)([""]);return ua=function(){return t},t}function la(){var t=Object(l.a)([""]);return la=function(){return t},t}function sa(){var t=Object(l.a)(["\n\tmargin-bottom: 24px;\n"]);return sa=function(){return t},t}function da(){var t=Object(l.a)(["\n\tfont-size: ",";\n\twidth: 392px;\n\tpadding: 8px 24px 8px 16px;\n\tborder-radius: 4px;\n\ttext-indent: 10px;\n\toutline: none;\n\tborder: 0.5px solid ",";\n\tdisplay: block;\n\tmargin-bottom: 32px;\n\ttext-indent: 4px;\n"]);return da=function(){return t},t}function pa(){var t=Object(l.a)(["\n\twidth: 432px;\n\tleft: 0;\n\theight: 100%;\n\tpadding-left: 24px;\n"]);return pa=function(){return t},t}var fa=p.d.div(pa()),ma=p.d.input(da(),(function(t){return t.theme.font.size.m}),(function(t){return t.theme.colors.lightGray})),ba=Object(p.d)(ma)(sa()),ha=Object(p.d)(ma)(la()),ga=Object(p.d)(ma)(ua()),xa=p.d.h3(ca()),va=p.d.button(ia(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.font.size.s}),(function(t){return t.theme.colors.lightBlue})),ja=p.d.p(aa()),Oa=p.d.p(oa(),(function(t){return t.theme.colors.blue})),Ea=p.d.p(ra(),(function(t){return t.theme.colors.red}),(function(t){return t.theme.font.size.xs})),wa=p.d.div(ea());function ya(t){var n=t.showLogIn,e=t.closeModal,a=Object(r.useState)(""),i=Object(u.a)(a,2),c=i[0],l=i[1],s=Object(r.useState)(""),d=Object(u.a)(s,2),p=d[0],f=d[1],m=Object(r.useState)(""),b=Object(u.a)(m,2),h=b[0],g=b[1],j=Object(r.useState)(!0),O=Object(u.a)(j,2),E=O[0],w=O[1],y=Object(r.useContext)(zn).setUser,k=Object(r.useRef)(null);na(k);return o.a.createElement(fa,null,o.a.createElement(xa,null,"By having an account, you can join, vote, and comment on all your favorite content."),o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),E&&(v(c,h,p,y),l(""),f(""),e())}},E?o.a.createElement(wa,null):o.a.createElement(Ea,null,"Sorry, this username is already taken"),o.a.createElement(ba,{type:"text",focus:!0,required:!0,placeholder:"Username",vale:c,ref:k,onChange:function(t){l(t.target.value),w(!0)},onBlur:function(){c.length>=1&&x.firestore().collection("usernames").doc(c).get().then((function(t){return t.exists?w(!1):w(!0)})).catch((function(t){return console.log(t)}))},maxLength:"15"}),o.a.createElement(ga,{type:"email",focus:!0,required:!0,placeholder:"Email",vale:h,onChange:function(t){return g(t.target.value)},maxLength:"64"}),o.a.createElement(ha,{type:"password",required:!0,placeholder:"Password",vale:p,onChange:function(t){return f(t.target.value)},minLength:"6",maxLength:"128"}),o.a.createElement(va,{type:"submit"},"Sign Up")),o.a.createElement(ja,null,"Already have an account?"),o.a.createElement(Oa,{onClick:function(){return n()}},"LOG IN"))}function ka(){var t=Object(l.a)(["\n\tdisplay: inline;\n\tfont-size: 12px;\n\tcursor: pointer;\n\tcolor: ",";\n"]);return ka=function(){return t},t}function Ca(){var t=Object(l.a)(["\n\tdisplay: inline;\n\tmargin-right: 4px;\n\tfont-size: 12px;\n"]);return Ca=function(){return t},t}function Sa(){var t=Object(l.a)(["\n\twidth: 178px;\n\theight: 40px;\n\tpadding: 8px;\n\tbackground-color: ",";\n\tcolor: white;\n\ttext-transform: uppercase;\n\tfont-size: ",";\n\ttext-align: center;\n\tborder: none;\n\tmargin: 0 0 8px 0;\n\t&&:hover {\n\t\tbackground-color: ",";\n\t}\n"]);return Sa=function(){return t},t}function Pa(){var t=Object(l.a)(["\n\tmargin-bottom: 16px;\n"]);return Pa=function(){return t},t}function za(){var t=Object(l.a)([""]);return za=function(){return t},t}function Ta(){var t=Object(l.a)(["\n\tmargin-bottom: 24px;\n"]);return Ta=function(){return t},t}function Ia(){var t=Object(l.a)(["\n\tfont-size: ",";\n\twidth: 100%;\n\tmax-width: calc(100% - 34px);\n\tdisplay: block;\n\tpadding: 8px 16px 8px 16px;\n\tborder-radius: 4px;\n\ttext-indent: 10px;\n\toutline: none;\n\tborder: 0.5px solid ",";\n\tdisplay: block;\n\tmargin-bottom: 32px;\n\ttext-indent: 4px;\n"]);return Ia=function(){return t},t}function Va(){var t=Object(l.a)(["\n\twidth: 100%;\n"]);return Va=function(){return t},t}function Ma(){var t=Object(l.a)(["\n\twidth: 100%;\n\theight: 100%;\n\tpadding-left: 24px;\n\tmax-width: 432px;\n\n\t@media screen and (max-width: 500px) {\n\t\tmargin: 0 auto;\n\t\tpadding: 8px 0 8px 0;\n\t\twidth: calc(100% - 24px);\n\t}\n"]);return Ma=function(){return t},t}function Ba(){var t=Object(l.a)(["\n\tleft: 0;\n\tright: 0;\n\theight: 100%;\n"]);return Ba=function(){return t},t}var La=p.d.div(Ba()),Aa=p.d.div(Ma()),Da=p.d.form(Va()),Ua=p.d.input(Ia(),(function(t){return t.theme.font.size.m}),(function(t){return t.theme.colors.lightGray})),_a=Object(p.d)(Ua)(Ta()),Ga=Object(p.d)(Ua)(za()),Fa=p.d.h3(Pa()),Wa=p.d.button(Sa(),(function(t){return t.theme.colors.blue}),(function(t){return t.theme.font.size.s}),(function(t){return t.theme.colors.lightBlue})),qa=p.d.p(Ca()),Ra=p.d.p(ka(),(function(t){return t.theme.colors.blue}));function Na(t){var n=t.showSignUp,e=t.closeModal,a=t.setModalContent,i=t.isAuthErrorShown,c=t.setIsAuthErrorShown,l=Object(r.useState)(""),s=Object(u.a)(l,2),d=s[0],p=s[1],f=Object(r.useState)(""),m=Object(u.a)(f,2),b=m[0],h=m[1],g=Object(r.useContext)(zn),x=g.setUser,v=g.user,O=Object(r.useRef)(null);na(O);var E=function(){i&&c(!1)};return o.a.createElement(La,null,o.a.createElement(Aa,null,o.a.createElement(Fa,null,"Sign In"),o.a.createElement(Da,{onSubmit:function(t){t.preventDefault(),j(d,b,x,v,a,c),p(""),h(""),e()}},i?o.a.createElement(Ea,null,"Password and/or email incorrect."):o.a.createElement(wa,null),o.a.createElement(_a,{type:"email",focus:!0,required:!0,placeholder:"Email",vale:d,onChange:function(t){p(t.target.value),E()},ref:O,maxLength:"64"}),o.a.createElement(Ga,{type:"password",required:!0,placeholder:"Password",vale:b,onChange:function(t){h(t.target.value),E()},maxLength:"128"}),o.a.createElement(Wa,{type:"submit"},"Sign In")),o.a.createElement(qa,null,"Don't have an account?"),o.a.createElement(Ra,{onClick:function(){return n()}},"SIGN UP")))}function Ja(){var t=Object(l.a)([""]);return Ja=function(){return t},t}function Ha(){var t=Object(l.a)([""]);return Ha=function(){return t},t}function Xa(){var t=Object(l.a)(["\n\tfont-size: 160px;\n"]);return Xa=function(){return t},t}function Ya(){var t=Object(l.a)(["\n\tmargin: 0 auto;\n\tpadding-top: 40px;\n\ttext-align: center;\n\tcolor: ",";\n\t&& > a,\n\ta:visited {\n\t\tcolor: ",";\n\t}\n"]);return Ya=function(){return t},t}var Za=p.d.div(Ya(),(function(t){return t.theme.colors.grey}),(function(t){return t.theme.colors.blue})),Ka=p.d.h1(Xa()),$a=p.d.p(Ha()),Qa=p.d.p(Ja());function ti(){return o.a.createElement(ei,null,o.a.createElement(Za,null,o.a.createElement(Ka,null,"404"),o.a.createElement($a,null,"page not found"),o.a.createElement(Qa,null,"the page you requested does not exist"),o.a.createElement("br",null),o.a.createElement(s.b,{to:"/"},"go back")))}function ni(){var t=Object(l.a)(["\n\twidth: 100vw;\n\tmin-height: 100vh;\n\tbackground: ",";\n\tpadding-top: 48px;\n"]);return ni=function(){return t},t}var ei=p.d.div(ni(),(function(t){return t.theme.colors.backgroundBlue}));var ri=function(){var t=Object(r.useState)({}),n=Object(u.a)(t,2),e=n[0],a=n[1],i=Object(r.useState)(null),l=Object(u.a)(i,1)[0],p=Object(r.useState)(null),f=Object(u.a)(p,2),m=f[0],b=f[1],h=Object(r.useState)([]),g=Object(u.a)(h,2),v=g[0],j=g[1],O=Object(r.useState)("TIME_ASC"),E=Object(u.a)(O,2),w=E[0],k=E[1],C=Object(r.useState)(),S=Object(u.a)(C,2),P=S[0],z=S[1],T=Object(r.useState)(!1),I=Object(u.a)(T,2),V=I[0],M=I[1];Object(r.useEffect)((function(){var t=[],n=[],e=function(){x.firestore().collection("posts").orderBy(an[w].column,an[w].direction).orderBy(an[w].column2,an[w].direction2).get().then((function(e){e.forEach((function(e){var r=e.data();n.unshift({vote:r.vote,id:r.id}),t.unshift(Object(c.a)({id:e.id},r))})),j(t)})).catch((function(t){return console.log(t)}))};return e(),function(){return e()}}),[w]),Object(r.useEffect)((function(){x.auth().onAuthStateChanged((function(t){window.user=t,t&&x.firestore().collection("users").doc(window.user.uid).get().then((function(n){var e=n.data();a({username:window.user.displayName,email:t.email,uid:t.uid,isSignedIn:!0,isAnonymous:!1,posts:e.posts,postVotes:e.postVotes,commentVotes:e.commentVotes})})).catch((function(t){return console.log(t)}))}))}),[]);var B=function(t){var n=v.filter((function(n){return n.id===t}));z(n[0])},L=function(t){k(t)};return o.a.createElement(zn.Provider,{value:{posts:v,setPosts:j,user:e,setUser:a,users:l,setModalContent:b,castPostVote:function(t,n,r,o,i,u){var l;if(t.stopPropagation(),e.isSignedIn)if(e.postVotes[r]===n);else{if(l="up"===e.postVotes[r]?o-2:"down"===e.postVotes[r]?o+2:"up"===n?o+1:o-1,"home"===u){var s=v.map((function(t){return t.id===r&&(t.vote=l),t}));j(s)}else if("comments"===u){var d=Object(c.a)({},P);d.vote=l,z(d)}var p=Object(c.a)({},e.postVotes);p[r]=n,i(n),a(Object(c.a)({},e,{postVotes:p})),x.firestore().collection("users").doc(e.uid).update({postVotes:p}).catch((function(t){console.log(t)})),x.firestore().collection("posts").doc(r).update({vote:l}).catch((function(t){return console.log(t)}))}else b("signup")}}},o.a.createElement(s.a,{basename:"front-page-of-the-front-page"},o.a.createElement(y,null),"login"===m?o.a.createElement(ta,{closeModal:function(){return b(null)}},o.a.createElement(Na,{showSignUp:function(){return b("signup")},closeModal:function(){return b(null)},setModalContent:b,isAuthErrorShown:V,setIsAuthErrorShown:M})):"signup"===m?o.a.createElement(ta,{closeModal:function(){return b(null)}},o.a.createElement(ya,{showLogIn:function(){return b("login")},closeModal:function(){return b(null)},setModalContent:b})):null,o.a.createElement(Hr,{openModal:b,closeModal:b,viewPostComments:B}),o.a.createElement(d.c,null,o.a.createElement(d.a,{exact:!0,path:"/",component:function(t){return o.a.createElement(qe,Object.assign({},t,{posts:v,sortPosts:L,sortBy:w,viewPostComments:B,user:e}))}}),o.a.createElement(d.a,{exact:!0,path:"/submit",component:function(t){return o.a.createElement(We,t)}}),o.a.createElement(d.a,{exact:!0,path:"/comments/:post/:id",component:function(t){return o.a.createElement(_o,Object.assign({},t,{setModalContent:b,postData:P,viewPostComments:B,setPostData:z,setUser:a}))}}),o.a.createElement(d.a,{component:ti}))))},oi={colors:{red:"rgb(255, 69, 0)",blue:"#0079d3",black:"#000",gray:"#707070",grey:"#707070",veryLightGray:"rgb(230, 230,230)",veryLightGrey:"rgb(230, 230,230)",lightGray:"rgb(215, 215, 215)",lightGrey:"rgb(215, 215, 215)",backgroundBlue:"#dae0e6",lightBlue:"#3394dc"},font:{family:['"IBM Plex Sans", sans-serif'],size:{xs:"12px",s:"16px",m:"18px",l:"20px"}}},ai=function(t){var n=t.children;return o.a.createElement(p.a,{theme:oi},n)};i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ai,null,o.a.createElement(ri,null))),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.fe434307.chunk.js.map